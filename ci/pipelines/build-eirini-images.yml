## ======================================================================
## GENERATED FILE. DO NOT EDIT
## Generated by running ./ci/configure build-eirini-images from ~/workspace/cf-for-k8s
## ======================================================================

resources:
- name: eirini
  type: git
  source:
    uri: git@github.com:cloudfoundry-incubator/eirini.git
    branch: 1.9.0
    private_key: ((cf_for_k8s_readonly_deploy_key.private_key))
- name: cf-for-k8s-eirini-opi
  type: registry-image
  source:
    repository: relintdockerhubpushbot/cf-for-k8s-eirini-opi
    username: ((dockerhub_username))
    password: ((dockerhub_password))
    tag: 1.9.0
    email: cf-release-integration+dockerhub-push-bot@pivotal.io
- name: cf-for-k8s-eirini-event-reporter
  type: registry-image
  source:
    repository: relintdockerhubpushbot/cf-for-k8s-eirini-event-reporter
    username: ((dockerhub_username))
    password: ((dockerhub_password))
    tag: 1.9.0
    email: cf-release-integration+dockerhub-push-bot@pivotal.io
- name: cf-for-k8s-eirini-eirini-controller
  type: registry-image
  source:
    repository: relintdockerhubpushbot/cf-for-k8s-eirini-eirini-controller
    username: ((dockerhub_username))
    password: ((dockerhub_password))
    tag: 1.9.0
    email: cf-release-integration+dockerhub-push-bot@pivotal.io
- name: cf-for-k8s-eirini-metrics-collector
  type: registry-image
  source:
    repository: relintdockerhubpushbot/cf-for-k8s-eirini-metrics-collector
    username: ((dockerhub_username))
    password: ((dockerhub_password))
    tag: 1.9.0
    email: cf-release-integration+dockerhub-push-bot@pivotal.io
- name: cf-for-k8s-eirini-route-collector
  type: registry-image
  source:
    repository: relintdockerhubpushbot/cf-for-k8s-eirini-route-collector
    username: ((dockerhub_username))
    password: ((dockerhub_password))
    tag: 1.9.0
    email: cf-release-integration+dockerhub-push-bot@pivotal.io
- name: cf-for-k8s-eirini-route-pod-informer
  type: registry-image
  source:
    repository: relintdockerhubpushbot/cf-for-k8s-eirini-route-pod-informer
    username: ((dockerhub_username))
    password: ((dockerhub_password))
    tag: 1.9.0
    email: cf-release-integration+dockerhub-push-bot@pivotal.io
- name: cf-for-k8s-eirini-route-statefulset-informer
  type: registry-image
  source:
    repository: relintdockerhubpushbot/cf-for-k8s-eirini-route-statefulset-informer
    username: ((dockerhub_username))
    password: ((dockerhub_password))
    tag: 1.9.0
    email: cf-release-integration+dockerhub-push-bot@pivotal.io
- name: cf-for-k8s-eirini-staging-reporter
  type: registry-image
  source:
    repository: relintdockerhubpushbot/cf-for-k8s-eirini-staging-reporter
    username: ((dockerhub_username))
    password: ((dockerhub_password))
    tag: 1.9.0
    email: cf-release-integration+dockerhub-push-bot@pivotal.io
- name: cf-for-k8s-eirini-task-reporter
  type: registry-image
  source:
    repository: relintdockerhubpushbot/cf-for-k8s-eirini-task-reporter
    username: ((dockerhub_username))
    password: ((dockerhub_password))
    tag: 1.9.0
    email: cf-release-integration+dockerhub-push-bot@pivotal.io
jobs:
- name: build-opi
  plan:
  - task: pipeline-revision-info
    config:
      platform: linux
      image_resource:
        source:
          repository: busybox
        type: docker-image
      run:
        path: /bin/echo
        args:
        - -e
        - git@github.com:cloudfoundry/cf-for-k8s.git 63cd9e9b9e5ae8acc33745d21f5c6658303de594 ci/templates/build-eirini-images.yml \e[31mdirty\e[0m
  - get: eirini
  - task: rev-parse
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: bitnami/git
      inputs:
      - name: eirini
      outputs:
      - name: revision
      run:
        path: /bin/bash
        args:
        - -c
        - |
          pushd eirini
            git rev-parse HEAD > ../revision/revision
            git describe --tags > ../revision/tag
          popd > /dev/null
  - task: build-opi
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: vito/oci-build-task
      inputs:
      - name: eirini
      - name: revision
      outputs:
      - name: image
      caches:
      - path: cache
      run:
        path: /bin/sh
        args:
        - -c
        - |
          export BUILD_ARG_GIT_SHA="$(cat revision/revision)"
          ls -R
          build
      params:
        DOCKERFILE: ./eirini/docker/opi/Dockerfile
        CONTEXT: ./eirini/
  - task: deplab-opi
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: relintdockerhubpushbot/cf-for-k8s-deplab
      inputs:
      - name: eirini
      - name: image
      outputs:
      - name: deplab-image
      run:
        path: /bin/sh
        args:
        - -c
        - |
          deplab --image-tar image/image.tar \
            --git eirini \
            --output-tar deplab-image/image.tar
  - put: cf-for-k8s-eirini-opi
    params:
      image: deplab-image/image.tar
- name: build-event-reporter
  plan:
  - task: pipeline-revision-info
    config:
      platform: linux
      image_resource:
        source:
          repository: busybox
        type: docker-image
      run:
        path: /bin/echo
        args:
        - -e
        - git@github.com:cloudfoundry/cf-for-k8s.git 63cd9e9b9e5ae8acc33745d21f5c6658303de594 ci/templates/build-eirini-images.yml \e[31mdirty\e[0m
  - get: eirini
  - task: rev-parse
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: bitnami/git
      inputs:
      - name: eirini
      outputs:
      - name: revision
      run:
        path: /bin/bash
        args:
        - -c
        - |
          pushd eirini
            git rev-parse HEAD > ../revision/revision
            git describe --tags > ../revision/tag
          popd > /dev/null
  - task: build-event-reporter
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: vito/oci-build-task
      inputs:
      - name: eirini
      - name: revision
      outputs:
      - name: image
      caches:
      - path: cache
      run:
        path: /bin/sh
        args:
        - -c
        - |
          export BUILD_ARG_GIT_SHA="$(cat revision/revision)"
          ls -R
          build
      params:
        DOCKERFILE: ./eirini/docker/event-reporter/Dockerfile
        CONTEXT: ./eirini/
  - task: deplab-event-reporter
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: relintdockerhubpushbot/cf-for-k8s-deplab
      inputs:
      - name: eirini
      - name: image
      outputs:
      - name: deplab-image
      run:
        path: /bin/sh
        args:
        - -c
        - |
          deplab --image-tar image/image.tar \
            --git eirini \
            --output-tar deplab-image/image.tar
  - put: cf-for-k8s-eirini-event-reporter
    params:
      image: deplab-image/image.tar
- name: build-eirini-controller
  plan:
  - task: pipeline-revision-info
    config:
      platform: linux
      image_resource:
        source:
          repository: busybox
        type: docker-image
      run:
        path: /bin/echo
        args:
        - -e
        - git@github.com:cloudfoundry/cf-for-k8s.git 63cd9e9b9e5ae8acc33745d21f5c6658303de594 ci/templates/build-eirini-images.yml \e[31mdirty\e[0m
  - get: eirini
  - task: rev-parse
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: bitnami/git
      inputs:
      - name: eirini
      outputs:
      - name: revision
      run:
        path: /bin/bash
        args:
        - -c
        - |
          pushd eirini
            git rev-parse HEAD > ../revision/revision
            git describe --tags > ../revision/tag
          popd > /dev/null
  - task: build-eirini-controller
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: vito/oci-build-task
      inputs:
      - name: eirini
      - name: revision
      outputs:
      - name: image
      caches:
      - path: cache
      run:
        path: /bin/sh
        args:
        - -c
        - |
          export BUILD_ARG_GIT_SHA="$(cat revision/revision)"
          ls -R
          build
      params:
        DOCKERFILE: ./eirini/docker/eirini-controller/Dockerfile
        CONTEXT: ./eirini/
  - task: deplab-eirini-controller
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: relintdockerhubpushbot/cf-for-k8s-deplab
      inputs:
      - name: eirini
      - name: image
      outputs:
      - name: deplab-image
      run:
        path: /bin/sh
        args:
        - -c
        - |
          deplab --image-tar image/image.tar \
            --git eirini \
            --output-tar deplab-image/image.tar
  - put: cf-for-k8s-eirini-eirini-controller
    params:
      image: deplab-image/image.tar
- name: build-metrics-collector
  plan:
  - task: pipeline-revision-info
    config:
      platform: linux
      image_resource:
        source:
          repository: busybox
        type: docker-image
      run:
        path: /bin/echo
        args:
        - -e
        - git@github.com:cloudfoundry/cf-for-k8s.git 63cd9e9b9e5ae8acc33745d21f5c6658303de594 ci/templates/build-eirini-images.yml \e[31mdirty\e[0m
  - get: eirini
  - task: rev-parse
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: bitnami/git
      inputs:
      - name: eirini
      outputs:
      - name: revision
      run:
        path: /bin/bash
        args:
        - -c
        - |
          pushd eirini
            git rev-parse HEAD > ../revision/revision
            git describe --tags > ../revision/tag
          popd > /dev/null
  - task: build-metrics-collector
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: vito/oci-build-task
      inputs:
      - name: eirini
      - name: revision
      outputs:
      - name: image
      caches:
      - path: cache
      run:
        path: /bin/sh
        args:
        - -c
        - |
          export BUILD_ARG_GIT_SHA="$(cat revision/revision)"
          ls -R
          build
      params:
        DOCKERFILE: ./eirini/docker/metrics-collector/Dockerfile
        CONTEXT: ./eirini/
  - task: deplab-metrics-collector
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: relintdockerhubpushbot/cf-for-k8s-deplab
      inputs:
      - name: eirini
      - name: image
      outputs:
      - name: deplab-image
      run:
        path: /bin/sh
        args:
        - -c
        - |
          deplab --image-tar image/image.tar \
            --git eirini \
            --output-tar deplab-image/image.tar
  - put: cf-for-k8s-eirini-metrics-collector
    params:
      image: deplab-image/image.tar
- name: build-route-collector
  plan:
  - task: pipeline-revision-info
    config:
      platform: linux
      image_resource:
        source:
          repository: busybox
        type: docker-image
      run:
        path: /bin/echo
        args:
        - -e
        - git@github.com:cloudfoundry/cf-for-k8s.git 63cd9e9b9e5ae8acc33745d21f5c6658303de594 ci/templates/build-eirini-images.yml \e[31mdirty\e[0m
  - get: eirini
  - task: rev-parse
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: bitnami/git
      inputs:
      - name: eirini
      outputs:
      - name: revision
      run:
        path: /bin/bash
        args:
        - -c
        - |
          pushd eirini
            git rev-parse HEAD > ../revision/revision
            git describe --tags > ../revision/tag
          popd > /dev/null
  - task: build-route-collector
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: vito/oci-build-task
      inputs:
      - name: eirini
      - name: revision
      outputs:
      - name: image
      caches:
      - path: cache
      run:
        path: /bin/sh
        args:
        - -c
        - |
          export BUILD_ARG_GIT_SHA="$(cat revision/revision)"
          ls -R
          build
      params:
        DOCKERFILE: ./eirini/docker/route-collector/Dockerfile
        CONTEXT: ./eirini/
  - task: deplab-route-collector
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: relintdockerhubpushbot/cf-for-k8s-deplab
      inputs:
      - name: eirini
      - name: image
      outputs:
      - name: deplab-image
      run:
        path: /bin/sh
        args:
        - -c
        - |
          deplab --image-tar image/image.tar \
            --git eirini \
            --output-tar deplab-image/image.tar
  - put: cf-for-k8s-eirini-route-collector
    params:
      image: deplab-image/image.tar
- name: build-route-pod-informer
  plan:
  - task: pipeline-revision-info
    config:
      platform: linux
      image_resource:
        source:
          repository: busybox
        type: docker-image
      run:
        path: /bin/echo
        args:
        - -e
        - git@github.com:cloudfoundry/cf-for-k8s.git 63cd9e9b9e5ae8acc33745d21f5c6658303de594 ci/templates/build-eirini-images.yml \e[31mdirty\e[0m
  - get: eirini
  - task: rev-parse
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: bitnami/git
      inputs:
      - name: eirini
      outputs:
      - name: revision
      run:
        path: /bin/bash
        args:
        - -c
        - |
          pushd eirini
            git rev-parse HEAD > ../revision/revision
            git describe --tags > ../revision/tag
          popd > /dev/null
  - task: build-route-pod-informer
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: vito/oci-build-task
      inputs:
      - name: eirini
      - name: revision
      outputs:
      - name: image
      caches:
      - path: cache
      run:
        path: /bin/sh
        args:
        - -c
        - |
          export BUILD_ARG_GIT_SHA="$(cat revision/revision)"
          ls -R
          build
      params:
        DOCKERFILE: ./eirini/docker/route-pod-informer/Dockerfile
        CONTEXT: ./eirini/
  - task: deplab-route-pod-informer
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: relintdockerhubpushbot/cf-for-k8s-deplab
      inputs:
      - name: eirini
      - name: image
      outputs:
      - name: deplab-image
      run:
        path: /bin/sh
        args:
        - -c
        - |
          deplab --image-tar image/image.tar \
            --git eirini \
            --output-tar deplab-image/image.tar
  - put: cf-for-k8s-eirini-route-pod-informer
    params:
      image: deplab-image/image.tar
- name: build-route-statefulset-informer
  plan:
  - task: pipeline-revision-info
    config:
      platform: linux
      image_resource:
        source:
          repository: busybox
        type: docker-image
      run:
        path: /bin/echo
        args:
        - -e
        - git@github.com:cloudfoundry/cf-for-k8s.git 63cd9e9b9e5ae8acc33745d21f5c6658303de594 ci/templates/build-eirini-images.yml \e[31mdirty\e[0m
  - get: eirini
  - task: rev-parse
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: bitnami/git
      inputs:
      - name: eirini
      outputs:
      - name: revision
      run:
        path: /bin/bash
        args:
        - -c
        - |
          pushd eirini
            git rev-parse HEAD > ../revision/revision
            git describe --tags > ../revision/tag
          popd > /dev/null
  - task: build-route-statefulset-informer
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: vito/oci-build-task
      inputs:
      - name: eirini
      - name: revision
      outputs:
      - name: image
      caches:
      - path: cache
      run:
        path: /bin/sh
        args:
        - -c
        - |
          export BUILD_ARG_GIT_SHA="$(cat revision/revision)"
          ls -R
          build
      params:
        DOCKERFILE: ./eirini/docker/route-statefulset-informer/Dockerfile
        CONTEXT: ./eirini/
  - task: deplab-route-statefulset-informer
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: relintdockerhubpushbot/cf-for-k8s-deplab
      inputs:
      - name: eirini
      - name: image
      outputs:
      - name: deplab-image
      run:
        path: /bin/sh
        args:
        - -c
        - |
          deplab --image-tar image/image.tar \
            --git eirini \
            --output-tar deplab-image/image.tar
  - put: cf-for-k8s-eirini-route-statefulset-informer
    params:
      image: deplab-image/image.tar
- name: build-staging-reporter
  plan:
  - task: pipeline-revision-info
    config:
      platform: linux
      image_resource:
        source:
          repository: busybox
        type: docker-image
      run:
        path: /bin/echo
        args:
        - -e
        - git@github.com:cloudfoundry/cf-for-k8s.git 63cd9e9b9e5ae8acc33745d21f5c6658303de594 ci/templates/build-eirini-images.yml \e[31mdirty\e[0m
  - get: eirini
  - task: rev-parse
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: bitnami/git
      inputs:
      - name: eirini
      outputs:
      - name: revision
      run:
        path: /bin/bash
        args:
        - -c
        - |
          pushd eirini
            git rev-parse HEAD > ../revision/revision
            git describe --tags > ../revision/tag
          popd > /dev/null
  - task: build-staging-reporter
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: vito/oci-build-task
      inputs:
      - name: eirini
      - name: revision
      outputs:
      - name: image
      caches:
      - path: cache
      run:
        path: /bin/sh
        args:
        - -c
        - |
          export BUILD_ARG_GIT_SHA="$(cat revision/revision)"
          ls -R
          build
      params:
        DOCKERFILE: ./eirini/docker/staging-reporter/Dockerfile
        CONTEXT: ./eirini/
  - task: deplab-staging-reporter
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: relintdockerhubpushbot/cf-for-k8s-deplab
      inputs:
      - name: eirini
      - name: image
      outputs:
      - name: deplab-image
      run:
        path: /bin/sh
        args:
        - -c
        - |
          deplab --image-tar image/image.tar \
            --git eirini \
            --output-tar deplab-image/image.tar
  - put: cf-for-k8s-eirini-staging-reporter
    params:
      image: deplab-image/image.tar
- name: build-task-reporter
  plan:
  - task: pipeline-revision-info
    config:
      platform: linux
      image_resource:
        source:
          repository: busybox
        type: docker-image
      run:
        path: /bin/echo
        args:
        - -e
        - git@github.com:cloudfoundry/cf-for-k8s.git 63cd9e9b9e5ae8acc33745d21f5c6658303de594 ci/templates/build-eirini-images.yml \e[31mdirty\e[0m
  - get: eirini
  - task: rev-parse
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: bitnami/git
      inputs:
      - name: eirini
      outputs:
      - name: revision
      run:
        path: /bin/bash
        args:
        - -c
        - |
          pushd eirini
            git rev-parse HEAD > ../revision/revision
            git describe --tags > ../revision/tag
          popd > /dev/null
  - task: build-task-reporter
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: vito/oci-build-task
      inputs:
      - name: eirini
      - name: revision
      outputs:
      - name: image
      caches:
      - path: cache
      run:
        path: /bin/sh
        args:
        - -c
        - |
          export BUILD_ARG_GIT_SHA="$(cat revision/revision)"
          ls -R
          build
      params:
        DOCKERFILE: ./eirini/docker/task-reporter/Dockerfile
        CONTEXT: ./eirini/
  - task: deplab-task-reporter
    privileged: true
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: relintdockerhubpushbot/cf-for-k8s-deplab
      inputs:
      - name: eirini
      - name: image
      outputs:
      - name: deplab-image
      run:
        path: /bin/sh
        args:
        - -c
        - |
          deplab --image-tar image/image.tar \
            --git eirini \
            --output-tar deplab-image/image.tar
  - put: cf-for-k8s-eirini-task-reporter
    params:
      image: deplab-image/image.tar
